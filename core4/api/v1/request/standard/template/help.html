<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Download</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://bi.plan-net.com/cdn/assets/css/vuetify_2.0.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@3.x/css/materialdesignicons.min.css">
    <style>
        .wrapper::before {
            content: '';
            display: block;
            position: absolute;
            height: 240px;
            left: 0;
            right: 0;
            top: 0;
            background-color: rgb(63, 81, 93);
            z-index: 0;
            min-height: 120px;
        }

        .wrapper {
            /*max-height: calc(100vh - 1000px);*/
            margin-top: 62px;
            display: flex;
            flex-flow: row wrap;
            /*font-weight: bold;*/
            /*align-items: center;*/
            justify-content: center;
        }

        .wrapper > * {
            margin: 10px;
            flex: 1 100%;
            max-width:1260px;
        }

        pre.doctest-block {
            /*-moz-box-shadow:    inset 0 0 7px #474747;
            -webkit-box-shadow: inset 0 0 7px #474747;
            box-shadow:         inset 0 0 7px #474747;*/
            width: 100%;
            border: 1px dashed #fff;
            font-weight: bold;
            font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;
            background-color: gray;
            color: #fff;
            font-size: 0.83em;
            border-radius: 5px;
            padding: 10px;
            overflow: scroll;
        }

        p.rubric {
            display: block;
            font-size: 1em;
            margin: 1em 0 1em 0;
            font-weight: bold;
        }

        div.tab-item hr:last-child {
            display:none;
        }
    </style>
</head>
<body>
<!--{{globals()}}-->
<!-- list of all available variables -->
<div id="app">
    <v-app>
        <div class="wrapper">
            <v-card>
                <header class="px-7 pt-7 pb-2">
                    <a class="display-2 font-weight-bold black--text mb-0" href="{{enter_url}}" style="text-decoration: none;">[[ title ]]</a>
                    <h2 class="font-weight-regular" v-text="subtitle || qual_name"></h2>
                    <section class="grey--text">
                        <v-tooltip left>
                             <template v-slot:activator="{ on }">
                                  <span class="mr-2 caption font-weight-bold py-1 pr-1" v-on="on">
                                        <v-icon class="mr-1" small>mdi-account</v-icon>[[ author ]]
                                  </span>
                             </template>
                            <span>Author</span>
                        </v-tooltip>
                        <v-tooltip bottom>
                             <template v-slot:activator="{ on }">
                                  <span class="mr-2 caption font-weight-bold pa-1" v-on="on">
                                        <v-icon class="mr-1" small>mdi-calendar-check</v-icon>{{created_at.strftime("%d.%m.%Y %H:%M")}}
                                  </span>
                             </template>
                            <span>Created at</span>
                        </v-tooltip>
                        <v-tooltip top>
                             <template v-slot:activator="{ on }">
                                  <span class="mr-2 caption font-weight-bold darken-2 pa-1" v-on="on">
                                    <!--<span class="mr-2 caption font-weight-bold red darken-2 white&#45;&#45;text pa-1">-->
                                        <v-icon class="mr-1" small>mdi-tag-multiple</v-icon>
                                        <!--<v-icon class="white&#45;&#45;text mr-1" small>mdi-tag-multiple</v-icon>-->
                                             {% for t in tag[:3] %}
                                                <span>
                                                    {{t}}
                                                </span>
                                            {% end %}
                                  </span>
                             </template>
                            <span>Tags</span>
                        </v-tooltip>
                        <v-tooltip bottom>
                             <template v-slot:activator="{ on }">
                                   <span class="mr-2 caption font-weight-bold pa-1" v-on="on">
                                        <v-icon class="mr-1" small>mdi-[[icon]]</v-icon>[[icon]]
                                    </span>
                             </template>
                            <span>Icon</span>
                        </v-tooltip>
                        <v-tooltip right>
                             <template v-slot:activator="{ on }">
                                  <span class="mr-2 caption font-weight-bold pa-1" v-on="on">
                                        <v-icon v-if="protected" class="mr-1" small>mdi-lock</v-icon>
                                        <v-icon v-else class="mr-1" small>mdi-lock-open</v-icon>
                                  </span>
                             </template>
                            <span>Protected</span>
                        </v-tooltip>
                    </section>
                </header>
                <main>
                    <!--<v-tabs v-model="tabs" background-color="white" slider-color="primary" :centered="true" :grow="true">-->
                    <v-tabs v-model="tabs" background-color="primary accent-4" slider-color="red lighten-4" :centered="true" :grow="true" dark>
                        <v-tab class="font-weight-bold">Description</v-tab>
                        <v-tab class="font-weight-bold">Details</v-tab>
                    </v-tabs>

                    <v-tabs-items v-model="tabs" class="tabs-items px-7 py-4">

                        <v-tab-item class="tab-item">
                            <h4 id="list-item-2" class="headline font-weight-bold">Introduction</h4>
                            <span>{% raw description_html %}</span>
                            <v-divider class="pb-5 mt-5"></v-divider>
                            {% for elem in method %}
                            <span id="{{elem['method'].upper()}}" class="headline font-weight-bold pb-2">{{ elem['method'].upper() }}</span>
                            <!--<h2></h2>-->
                            {% raw elem["html"] %}
                            <v-divider class="pb-5 mt-5"></v-divider>
                            {% end %}
                            <div v-if="isCoreStaticFileHandler">
                                <span class="text-uppercase font-weight-bold">Path:</span> [[args.data.path]]
                                <br>
                                <span class="text-uppercase font-weight-bold">Enter:</span> [[args.data.enter]]
                                <br>
                                <span class="text-uppercase font-weight-bold">Enter url:</span>
                                <a href="{{enter_url}}" class="pl-2">{{enter_url}}</a>
                            </div>
                        </v-tab-item>

                        <v-tab-item class="tab-item">
                            <div class="py-3">
                                <span class="text-uppercase font-weight-bold">Resource ID:</span>
                                <span class="font-weight-regular">[[ rsc_id ]]</span>
                            </div>
                            <div class="py-3">
                                <span class="text-uppercase font-weight-bold">Container:</span>
                                <span class="font-weight-regular">[[ container ]]</span>
                            </div>
                            <div class="py-3">
                                <span class="text-uppercase font-weight-bold"> Class args:</span>
                                <pre class="doctest-block">[[args.template]]</pre>
                            </div>
                            <div class="py-3">
                                <span class="text-uppercase font-weight-bold">Pattern:</span>
                                <ul class="font-weight-regular">
                                    {% for p in pattern %}
                                    <li>
                                        {% if p["name"] is not None %}
                                        <b>{{ p["name"] }}:</b>
                                        {% else %}
                                        <b>no name:</b>
                                        {% end if %}
                                        {{ p["regex"] }}
                                    </li>
                                    {% end %}
                                </ul>
                            </div>
                            <div class="py-3">
                                <span class="text-uppercase font-weight-bold">Endpoints:</span>
                                <ul class="font-weight-regular">
                                    {% for ep in endpoint %}
                                    <li>
                                        {{ ep }}
                                        <ul>
                                            <li><a href="{{ ep }}/_info/card/{{ rsc_id }}">card</a></li>
                                            <li><a href="{{ ep }}/_info/help/{{ rsc_id }}">help</a></li>
                                            {% if enter_url != None %}
                                            <li>ENTER: <a href="{{enter_url}}">[[ enter_url ]]</a></li>
                                            {% else %}
                                            <li><a href="{{ ep }}/_info/enter/{{ rsc_id }}">enter</a></li>
                                            {% end if %}
                                        </ul>
                                    </li>
                                    {% end for %}
                                </ul>
                            </div>
                        </v-tab-item>
                    </v-tabs-items>
                </main>
            </v-card>
        </div>
    </v-app>
</div>
<script src="https://bi.plan-net.com/cdn/assets/js/vue-assets_2.0.js"></script>
<script>
    new Vue({
        delimiters: ['[[', ']]'],
        el: '#app',
        vuetify: new Vuetify({
             theme: {
               themes: {
                 light: window.PNBI_THEME,
                 dark: window.PNBI_THEME
               },
             },
        }),
        data() {
            return {
                tabs: null,
                subtitle: '{{subtitle}}',
                qual_name: '{{qual_name}}',
                title: '{{title}}',
                author: '{{author}}',
                protected: '{{protected}}',
                rsc_id: '{{rsc_id}}',
                container: '{{container}}',
                icon: '{{icon}}',
                enter_url: '{{enter_url}}',
                <!--isMethodsExist: '{{method}}'.length > 2-->
            }
        },
        computed: {
            args: function () {
                var result = {
                    data: {},
                    template: '{{args}}'
                }

                try {
                    var clean_str = result.template.replace(/&#39;/gi, `"`)

                    clean_str = clean_str.replace(/None/gi, `null`)
                    clean_str = clean_str.replace(/True/gi, `true`)
                    clean_str = clean_str.replace(/False/gi, `false`)

                    result.data = JSON.parse(clean_str)
                    result.template =  JSON.stringify(result.data, undefined, 4)
                } catch (e) {
                    console.warn(`Error with a parsing string ${result}`)
                    console.error(e)
                }

                return result;
            },
            isCoreStaticFileHandler: function () {
                const qual_name = '{{qual_name}}'

                return qual_name.split(".").slice(-1)[0] === 'CoreStaticFileHandler'
            }
        },
        mounted() {},
        filters: {},
        methods: {}
    })
</script>
</body>
</html>